prefix = @prefix@
target = @target_alias@
NEWLIB = $(prefix)/$(target)
MAKE = make
CC_FOR_TARGET = $(target)-gcc
CFLAGS_FOR_TARGET = -O3 -ftree-vectorize -I. -Iplatform/hermit -Iplatform/helper -I$(NEWLIB)/include
AR_FOR_TARGET = $(target)-ar
ARFLAGS_FOR_TARGET = rsv
CP = cp
C_source =  $(wildcard *.c) platform/hermit/pte_osal.c platform/helper/tls-helper.c
NAME = libpthread.a
OBJS = $(C_source:.c=.o)
RM = rm -rf

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_SCRIPT = @INSTALL_SCRIPT@
INSTALL_DATA = @INSTALL_DATA@

#
# Prettify output
V = 0
ifeq ($V,0)
	Q = @
	P = > /dev/null
endif

# other implicit rules
%.o : %.c
	@echo [CC] $@
	$Q$(CC_FOR_TARGET) -c $(CFLAGS_FOR_TARGET) -o $@ $<

default: all

all: $(NAME)

$(NAME): $(OBJS)
	$Q$(AR_FOR_TARGET) $(ARFLAGS_FOR_TARGET) $@ $(OBJS)

install:
	$(INSTALL_DATA) $(NAME) $(NEWLIB)/lib

headers:
	$(INSTALL_DATA) pthread.h $(NEWLIB)/include
	$(INSTALL_DATA) semaphore.h $(NEWLIB)/include
	$(INSTALL_DATA) platform/hermit/pte_types.h $(NEWLIB)/include
	
clean:
	@echo Cleaning examples
	$Q$(RM) $(NAME) *.o *~ platform/hermit/*.o platform/helper/*.o

veryclean:
	@echo Propper cleaning examples
	$Q$(RM) $(NAME) *.o *~ platform/hermit/*.o platform/helper/*.o

depend:
	$Q$(CC_FOR_TARGET) -MM $(CFLAGS_FOR_TARGET) *.c > Makefile.dep

distclean: clean
	@echo Cleaning files generated by configure
	$Q$(RM) Makefile config.log config.status

-include Makefile.dep
# DO NOT DELETE
